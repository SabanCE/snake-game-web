<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Şaban Akçehre - Sistem Erişimi</title>
    <style>
        :root {
            --bg-color: #050505;
            --snake-color: #00ff41; /* Hacker Yeşili */
            --food-color: #ff0055; /* Cyber Kırmızı */
            --text-color: #ffffff;
            --accent: #00f3ff; /* Neon Mavi */
        }

        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: 'Courier New', Courier, monospace; /* Dijital font havası */
            display: flex; flex-direction: column; align-items: center;
            /* DEĞİŞİKLİK: Dikey olarak da ortalamak için center yapıldı */
            justify-content: center;
            min-height: 100vh; margin: 0; padding: 10px; box-sizing: border-box;
            touch-action: manipulation; /* Mobilde gecikmeyi önler */
        }

        h2 { margin: 5px 0 15px 0; color: var(--accent); letter-spacing: 2px; text-align: center; text-transform: uppercase; }
        #score-board { font-size: 1.2rem; margin-bottom: 15px; text-align: center;}
        #target-score { color: var(--food-color); font-weight: bold; }

        #game-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #game-container {
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            border: 2px solid var(--snake-color);
        }

        canvas { background: #111; display: block; }

        /* Oyun Sonu ve Başlangıç Ekranları */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5, 5, 5, 0.9);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; z-index: 10; padding: 20px; box-sizing: border-box;
        }
        #start-screen { display: flex; }
        #game-over-screen { display: none; }
        .overlay h3 { color: var(--food-color); margin-bottom: 10px; }
        .btn-cyber {
            background: transparent; border: 2px solid var(--snake-color); color: var(--snake-color);
            padding: 10px 20px; font-family: inherit; font-weight: bold; cursor: pointer;
            margin-top: 15px; transition: 0.2s; text-transform: uppercase;
        }
        .btn-cyber:hover { background: var(--snake-color); color: black; box-shadow: 0 0 15px var(--snake-color); }

        /* Mobil Kontroller */
        #mobile-controls {
            display: grid;
            grid-template-columns: 60px 60px 60px;
            grid-template-rows: 60px 60px;
            gap: 5px; margin-top: 25px;
            justify-content: center;
            /* Masaüstünde gizle, mobilde göster */
        }
        .control-btn {
            background: rgba(255,255,255,0.1); border: 2px solid var(--accent);
            color: var(--accent); font-size: 24px; display: flex;
            justify-content: center; align-items: center; cursor: pointer;
            user-select: none; border-radius: 5px;
        }
        .control-btn:active { background: var(--accent); color: black; }
        #btn-up { grid-column: 2; grid-row: 1; }
        #btn-left { grid-column: 1; grid-row: 2; }
        #btn-down { grid-column: 2; grid-row: 2; }
        #btn-right { grid-column: 3; grid-row: 2; }

        /* KAZANMA EKRANI */
        #win-screen {
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 30px; width: 90%; max-width: 400px;
            animation: fadeIn 1s ease-out;
            border: 2px solid var(--snake-color);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
            background: #0a0a0a;
            border-radius: 10px;
        }
        
        .btn-follow {
            background: var(--accent); color: black; text-decoration: none;
            padding: 15px 30px; border-radius: 30px; font-weight: 900;
            text-transform: uppercase; letter-spacing: 1px; display: inline-block;
            box-shadow: 0 0 20px var(--accent); transition: transform 0.2s;
            margin-top: 25px;
        }
        .btn-follow:hover { transform: scale(1.05); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Sadece mobilde kontrolleri göster */
        @media (min-width: 769px) { #mobile-controls { display: none; } }
        /* Çok küçük ekranlar için canvas ayarı */
        @media (max-height: 600px) { canvas { width: 260px; height: 260px; } #mobile-controls { margin-top: 10px; grid-template-columns: 50px 50px 50px; grid-template-rows: 50px 50px;} }

    </style>
</head>
<body>

    <div id="game-wrapper">
        <h2>Şaban Akçehre</h2>
        <div id="score-board">Veri Toplandı: <span id="score">0</span> / <span id="target-score">10</span></div>

        <div id="game-container">
            <canvas id="gameCanvas" width="300" height="300"></canvas>

            <div id="start-screen" class="overlay">
                <p>ERİŞİM İÇİN<br>10 VERİ PAKETİ TOPLA</p>
                <button class="btn-cyber" onclick="startGame()">BAŞLAT_</button>
            </div>

            <div id="game-over-screen" class="overlay">
                <h3>SİSTEM HATASI!</h3>
                <p>Duvara veya kuyruğa çarptın.</p>
                <button class="btn-cyber" onclick="startGame()">TEKRAR DENE_</button>
            </div>
        </div>

        <div id="mobile-controls">
            <div class="control-btn" id="btn-up">↑</div>
            <div class="control-btn" id="btn-left">←</div>
            <div class="control-btn" id="btn-down">↓</div>
            <div class="control-btn" id="btn-right">→</div>
        </div>
    </div>


    <div id="win-screen">
        <h1 style="color: var(--snake-color); margin-bottom: 10px;">ERİŞİM BAŞARILI!</h1>
        <p>Güvenlik protokollerini aştın. Tebrikler.</p>
        
        <a href="https://instagram.com/sabanakcehre" class="btn-follow">Güzel oynadın. Merak edersen yapan kişiye göz atabilirsin</a>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const gameWrapper = document.getElementById('game-wrapper');
        const winScreen = document.getElementById('win-screen');

        // Canvas boyutunu CSS'e göre ayarla (Görünürlük netliği için)
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;

        const tileCount = 20; // 20x20 ızgara
        const gridSize = canvas.width / tileCount; // Dinamik ızgara boyutu
        const targetScore = 10;

        let snake = [];
        let food = {};
        let dx = gridSize;
        let dy = 0;
        let score = 0;
        let gameLoop;
        let changingDirection = false;

        function startGame() {
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            // Yılanı ortada başlat
            const startX = Math.floor(tileCount / 2) * gridSize;
            const startY = Math.floor(tileCount / 2) * gridSize;
            snake = [
                {x: startX, y: startY},
                {x: startX - gridSize, y: startY},
                {x: startX - gridSize*2, y: startY}
            ];
            dx = gridSize; dy = 0;
            score = 0;
            scoreEl.innerText = score;
            placeFood();
            if(gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(runGame, 110); // Hız ayarı
        }

        function runGame() {
            if (hasGameEnded()) {
                gameOver();
                return;
            }
            changingDirection = false;
            clearCanvas();
            moveSnake();
            drawFood();
            drawSnake();
        }

        function clearCanvas() {
            ctx.fillStyle = '#111';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 0.5;
            // Izgarayı dinamik çiz
            for(let i=0; i<=canvas.width; i+=gridSize) {
                ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke();
            }
            for(let j=0; j<=canvas.height; j+=gridSize) {
                ctx.beginPath(); ctx.moveTo(0,j); ctx.lineTo(canvas.width,j); ctx.stroke();
            }
        }

        function drawSnake() {
            snake.forEach((part, index) => {
                ctx.fillStyle = index === 0 ? '#00ff41' : '#00cc33';
                // Çizim koordinatlarını tam sayıya yuvarla (netlik için)
                ctx.fillRect(Math.round(part.x), Math.round(part.y), Math.round(gridSize - 1), Math.round(gridSize - 1));
                ctx.shadowBlur = 5; ctx.shadowColor = "#00ff41";
            });
             ctx.shadowBlur = 0;
        }

        function drawFood() {
            ctx.fillStyle = '#ff0055';
            ctx.beginPath();
            let r = gridSize/2 - 1;
            ctx.arc(Math.round(food.x + gridSize/2), Math.round(food.y + gridSize/2), (r > 0 ? r : 1), 0, Math.PI*2);
            ctx.fill();
            ctx.shadowBlur = 10; ctx.shadowColor = "#ff0055";
            ctx.shadowBlur = 0;
        }

        function moveSnake() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);

            // Yem yendi mi? (Toleranslı kontrol)
            if (Math.abs(head.x - food.x) < gridSize/2 && Math.abs(head.y - food.y) < gridSize/2) {
                score++;
                scoreEl.innerText = score;
                if (score >= targetScore) {
                    gameWon();
                    return;
                }
                placeFood();
            } else {
                snake.pop();
            }
        }

        function placeFood() {
            let newFood;
            let onSnake = true;
            while(onSnake) {
                newFood = {
                    x: Math.floor(Math.random() * tileCount) * gridSize,
                    y: Math.floor(Math.random() * tileCount) * gridSize
                };
                // Sınır kontrolü
                if (newFood.x >= canvas.width) newFood.x = canvas.width - gridSize;
                if (newFood.y >= canvas.height) newFood.y = canvas.height - gridSize;
                
                onSnake = snake.some(part => Math.abs(part.x - newFood.x) < 1 && Math.abs(part.y - newFood.y) < 1);
            }
            food = newFood;
        }

        function hasGameEnded() {
            const head = snake[0];
            if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) return true;
            for (let i = 4; i < snake.length; i++) {
                if (Math.abs(snake[i].x - head.x) < 1 && Math.abs(snake[i].y - head.y) < 1) return true;
            }
            return false;
        }

        function gameOver() {
            clearInterval(gameLoop);
            gameOverScreen.style.display = 'flex';
        }

        function gameWon() {
            clearInterval(gameLoop);
            gameWrapper.style.display = 'none';
            winScreen.style.display = 'flex';
        }

        function changeDirection(keyPressed) {
            if (changingDirection) return;
            const goingUp = dy === -gridSize;
            const goingDown = dy === gridSize;
            const goingRight = dx === gridSize;
            const goingLeft = dx === -gridSize;

            if ((keyPressed === 'ArrowLeft' || keyPressed === 'btn-left') && !goingRight) { dx = -gridSize; dy = 0; }
            if ((keyPressed === 'ArrowUp' || keyPressed === 'btn-up') && !goingDown) { dx = 0; dy = -gridSize; }
            if ((keyPressed === 'ArrowRight' || keyPressed === 'btn-right') && !goingLeft) { dx = gridSize; dy = 0; }
            if ((keyPressed === 'ArrowDown' || keyPressed === 'btn-down') && !goingUp) { dx = 0; dy = gridSize; }
            changingDirection = true;
        }

        document.addEventListener('keydown', (e) => changeDirection(e.key));
        
        ['btn-up', 'btn-left', 'btn-right', 'btn-down'].forEach(id => {
            document.getElementById(id).addEventListener('touchstart', (e) => {
                e.preventDefault();
                changeDirection(id);
            }, {passive: false});
             document.getElementById(id).addEventListener('mousedown', (e) => changeDirection(id));
        });

        // Pencere boyutu değişirse canvası yeniden ayarla
        window.addEventListener('resize', () => {
             canvas.width = canvas.offsetWidth;
             canvas.height = canvas.offsetHeight;
             // Oyunu sıfırla ki grafikler bozulmasın
             if(gameLoop) { clearInterval(gameLoop); startGame(); }
        });

    </script>
</body>
</html>
